(window.webpackJsonpkatachi=window.webpackJsonpkatachi||[]).push([[0],{156:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),a=t(81),o=t.n(a),i=t(65),u=t.n(i),l=t(82),s=t(2),b=t(4),f=t(91),d=t(1),m=t(93),O=t(85),j=t(41),v=t(57);function g(){var e=Object(s.a)(['\n  body {\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",\n      "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans",\n      "Helvetica Neue", sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  html,\n  body,\n  #root {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  html {\n    position: fixed;\n  }\n']);return g=function(){return e},e}j.b.add(v.b,v.a,v.c);var p={accent:"tomato",inactive:"#aaa"},h=Object(d.c)(g()),k=m.a,w=function(){return Object(r.useContext)(d.b)},S=function(e){var n=e.children;return c.a.createElement(O.a,{theme:p},n)},x=function(){return c.a.createElement(d.a,{styles:h})};function y(){var e=Object(s.a)(["\n            width: 3em;\n            height: 3em;\n            position: absolute;\n            top: 0;\n            right: 0;\n            cursor: pointer;\n            user-select: none;\n            text-align: center;\n            line-height: 3em;\n            color: #888;\n            font-size: 20px;\n          "]);return y=function(){return e},e}function C(){var e=Object(s.a)(["\n            width: 3em;\n            height: 3em;\n            position: absolute;\n            top: 0;\n            left: 0;\n            cursor: pointer;\n            user-select: none;\n            text-align: center;\n            line-height: 3em;\n            color: #888;\n            font-size: 20px;\n          "]);return C=function(){return e},e}function E(){var e=Object(s.a)(["\n        font-size: 1.2rem;\n        padding: 0 1em;\n        color: ",";\n        height: 3em;\n        line-height: 3em;\n        font-weight: bold;\n        text-align: center;\n      "]);return E=function(){return e},e}var N,T=function(e){var n=e.className,t=e.hidden,r=e.closable,c=e.onClose,a=e.backButtonVisible,o=e.onBackButtonClick,i=w();return t?null:Object(d.d)("div",{css:Object(d.c)(E(),i.accent),className:n},a&&Object(d.d)("div",{css:Object(d.c)(C()),onClick:o},"<"),"katachi",r&&Object(d.d)("div",{css:Object(d.c)(y()),onClick:c},"\xd7"))},L=t(48);function M(){var e=Object(s.a)(["\n  display: block;\n  margin: 0 auto 0.2em;\n  font-size: 1.5rem;\n"]);return M=function(){return e},e}function B(){var e=Object(s.a)(["\n  flex: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  text-align: center;\n  font-size: 0.8rem;\n  font-weight: bold;\n  color: ",";\n  flex: 1 1 0;\n  user-select: none;\n"]);return B=function(){return e},e}function z(){var e=Object(s.a)(["\n  display: flex;\n  align-items: stretch;\n  height: 4em;\n"]);return z=function(){return e},e}!function(e){e[e.Training=0]="Training",e[e.Report=1]="Report",e[e.Setting=2]="Setting"}(N||(N={}));var R=k.div(z()),H=k.div(B(),function(e){var n=e.active,t=e.theme;return n?t.accent:t.inactive}),I=k(L.a)(M()),F=function(e){var n=e.className,t=e.selected,r=e.onSelect;return c.a.createElement(R,{className:n},c.a.createElement(H,{active:t===N.Training,onClick:function(){return r&&r(N.Training)}},c.a.createElement("div",null,c.a.createElement(I,{icon:"shapes"}),"\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0")),c.a.createElement(H,{active:t===N.Report,onClick:function(){return r&&r(N.Report)}},c.a.createElement("div",null,c.a.createElement(I,{icon:"chart-line"}),"\u30ec\u30dd\u30fc\u30c8")),c.a.createElement(H,{active:t===N.Setting,onClick:function(){return r&&r(N.Setting)}},c.a.createElement("div",null,c.a.createElement(I,{icon:"sliders-h"}),"\u8a2d\u5b9a")))};function U(){var e=Object(s.a)(["\n          display: ",";\n        "]);return U=function(){return e},e}function A(){var e=Object(s.a)(["\n          position: relative;\n          flex: auto;\n          overflow: hidden;\n        "]);return A=function(){return e},e}function W(){var e=Object(s.a)(["\n        position: relative;\n        display: flex;\n        flex-direction: column;\n      "]);return W=function(){return e},e}var D=function(e){var n=e.className,t=e.children,r=e.currentMode,c=e.navHidden,a=e.onModeChange,o=e.headerClosable,i=e.onHeaderClose,u=e.headerBackButtonVisible,l=e.onHeaderBackButtonClick;return Object(d.d)("div",{className:n,css:Object(d.c)(W())},Object(d.d)("header",null,Object(d.d)(T,{closable:o,onClose:i,backButtonVisible:u,onBackButtonClick:l})),Object(d.d)("main",{role:"main",css:Object(d.c)(A())},t),Object(d.d)("nav",{css:Object(d.c)(U(),c?"none":"block")},Object(d.d)(F,{selected:r,onSelect:a})))};function V(){var e=Object(s.a)(["\n  display: inline-block;\n  width: 100%;\n  font-size: 14px;\n  border-radius: 0.5em;\n  border: none;\n  outline: none;\n  background-color: ",";\n  color: #fff;\n  padding: 1em 3em;\n  box-shadow: 0 0.1em 0.5em #00000030;\n  cursor: pointer;\n  user-select: none;\n  transition: all ease 0.1s;\n\n  &:hover {\n    filter: brightness(120%);\n  }\n\n  &:active {\n    filter: brightness(100%);\n    transform: translateY(1px);\n  }\n"]);return V=function(){return e},e}var Y=k.button(V(),function(e){return e.theme.accent}),G=function(e){var n=e.className,t=e.children,r=e.onClick;return c.a.createElement(Y,{className:n,onClick:r},t?t.toUpperCase():"")};function P(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        padding: 1em;\n      "]);return P=function(){return e},e}var X,J=function(e){var n=e.className,t=e.onSignIn;return Object(d.d)("div",{className:n,css:Object(d.c)(P())},Object(d.d)("h1",null,'\u5f62\u3092\u6b63\u78ba\u306b\u89b3\u308b "\u773c" \u3092\u990a\u3046\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0'),Object(d.d)(G,{onClick:t},"Twitter\u3067\u30ed\u30b0\u30a4\u30f3"))},K=function(e,n,t){return e>t?t:e<n?n:e},$=function(e,n){return e.length===n.length&&e.every(function(e,t){return e===n[t]})},q=t(38),Q=t(44),Z=(t(107),t(109),t(87)),_=t(92),ee=t(42),ne=t(34),te=t(88),re=t(161),ce=t(160),ae=Q.initializeApp({apiKey:"AIzaSyBkXkX7PIAhCXvnTau7lzrb1AOWbJXoa8I",authDomain:"katachi-25f71.firebaseapp.com",databaseURL:"https://katachi-25f71.firebaseio.com",projectId:"katachi-25f71",storageBucket:"katachi-25f71.appspot.com",messagingSenderId:"1057352886357",appId:"1:1057352886357:web:5e0e73ee245b501c"}),oe=new Q.auth.TwitterAuthProvider,ie=Q.auth(ae),ue=Q.database(ae);!function(e){e[e.Loading=0]="Loading",e[e.SignedOut=1]="SignedOut"}(X||(X={}));var le,se,be,fe,de,me=t(17);(se=le||(le={})).Legend="legend",se.Excellent="excellent",se.Good="good",se.Bad="bad",function(e){e.Easy="easy",e.Normal="normal",e.Hard="hard",e.Ultimate="ultimate"}(be||(be={})),function(e){e.VerticalLine2="verticalLine2"}(fe||(fe={}));var Oe={title:"\u5782\u76f4\u306a\u68d2\u306e\u6bd4\u7387",paramsSize:3,stateSize:1,duration:(de={},Object(me.a)(de,be.Easy,1/0),Object(me.a)(de,be.Normal,1e4),Object(me.a)(de,be.Hard,3e3),Object(me.a)(de,be.Ultimate,1e3),de),validateParams:function(e){var n=Object(b.a)(e,3),t=n[0],r=n[1],c=n[2];return t>.3&&r>.3&&Math.abs(t-r)>=.2&&c>.1&&c<.9},judgeScore:function(e,n){if(0===e[0])return 0;var t=.3-.1*e[0];return n?1-Math.min(t,Math.abs(e[2]-n[0]))/t:0}},je=Object(me.a)({},fe.VerticalLine2,Oe),ve=function(e){return Math.round(100*e)},ge=function(e){for(var n=je[e],t=0;t<100;t++){var r=new Array(n.paramsSize).fill(0).map(function(){return Math.random()}),c=n.validateParams(r);if(Array.isArray(c))return c;if(c)return r}},pe=function(e,n,t){return je[e].judgeScore(n,t)},he=function(e){return je[e].title};function ke(){var e=Object(s.a)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  max-width: 200px;\n  max-height: 200px;\n  width: calc(50vw - 0.6em);\n  height: calc(50vw - 0.6em);\n  vertical-align: middle;\n  user-select: none;\n  border-radius: 0.5em;\n  box-shadow: 0 0.1em 0.5em #00000030;\n  cursor: pointer;\n  transition: all ease 0.1s;\n  background-color: ",";\n  color: #fff;\n  box-sizing: border-box;\n  margin: 0.3em;\n\n  &:hover {\n    filter: brightness(105%);\n  }\n\n  &:active {\n    filter: brightness(100%);\n    transform: translateY(1px);\n  }\n"]);return ke=function(){return e},e}var we=k.div(ke(),function(e){return e.bgcolor||"#bbb"}),Se=function(e){var n=e.className,t=e.onSelect,c=Object(r.useCallback)(function(e){return t?function(){return t(e)}:void 0},[t]);return Object(d.d)("div",{className:n},Object.keys(je).map(function(e){return Object(d.d)(we,{key:e,onClick:c(e)},he(e))}))};function xe(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      "]);return xe=function(){return e},e}var ye=function(e){var n=e.className,t=e.onSelect;return Object(d.d)("div",{className:n,css:Object(d.c)(xe())},Object(d.d)(Se,{onSelect:t}))};function Ce(){var e=Object(s.a)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  max-width: 200px;\n  max-height: 200px;\n  width: calc(50vw - 0.6em);\n  height: calc(50vw - 0.6em);\n  vertical-align: middle;\n  user-select: none;\n  border-radius: 0.5em;\n  box-shadow: 0 0.1em 0.5em #00000030;\n  cursor: pointer;\n  transition: all ease 0.1s;\n  background-color: ",";\n  color: #fff;\n  box-sizing: border-box;\n  margin: 0.3em;\n\n  &:hover {\n    filter: brightness(105%);\n  }\n\n  &:active {\n    filter: brightness(100%);\n    transform: translateY(1px);\n  }\n"]);return Ce=function(){return e},e}var Ee=[[be.Easy,"Easy"],[be.Normal,"Normal"],[be.Hard,"Hard"],[be.Ultimate,"Ultimate"]],Ne=k.div(Ce(),function(e){return e.bgcolor||"#bbb"}),Te=function(e){var n=e.className,t=e.onSelect,c=Object(r.useCallback)(function(e){return t?function(){return t(e)}:void 0},[t]);return Object(d.d)("div",{className:n},Ee.map(function(e){var n=Object(b.a)(e,2),t=n[0],r=n[1];return Object(d.d)(Ne,{key:t,onClick:c(t)},r)}))};function Le(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      "]);return Le=function(){return e},e}var Me,Be=function(e){var n=e.className,t=e.onSelect;return Object(d.d)("div",{className:n,css:Object(d.c)(Le())},Object(d.d)(Te,{onSelect:t}))},ze=t(89),Re=t(18),He=t(158),Ie=t(165),Fe=t(159),Ue=t(163),Ae=t(164),We=t(169),De=t(166),Ve=t(167),Ye=t(168),Ge=t(162),Pe=function(e,n){return 200*e*n},Xe=function(e){var n=e.longerLength,t=e.lineLength,r=e.x,a=e.y,o=e.ratio,i=e.answerRatio,u=e.onMouseDown,l=e.onTouchStart;return 0===n||0===t?null:c.a.createElement(Re.Layer,{x:r,y:a},c.a.createElement(Re.Line,{points:[0,n-t,0,n],strokeWidth:3,stroke:"#000"}),c.a.createElement(Re.Line,{points:[-10,n-t,10,n-t],strokeWidth:3,stroke:"#000"}),c.a.createElement(Re.Line,{points:[-10,n,10,n],strokeWidth:3,stroke:"#000"}),"number"===typeof o&&c.a.createElement(Re.Line,{points:[-10,n-t*(1-o),10,n-t*(1-o)],strokeWidth:3,stroke:"#000"}),i&&c.a.createElement(Re.Line,{points:[-10,n-t*(1-i),10,n-t*(1-i)],strokeWidth:3,stroke:"#f00"}),c.a.createElement(Re.Line,{points:[0,-30,0,n+30],strokeWidth:200,onMouseDown:u,onTouchStart:l,stroke:"transparent"}))},Je=function(e){var n=e.className,t=e.params,a=e.state,o=e.isAnswerShown,i=e.screenSize,u=e.scaleCorrection,l=void 0===u?1:u,s=e.disableOperation,f=e.onUpdate,d=Object(r.useRef)(null),m=Pe(t[0],l),O=Pe(t[1],l),j=Math.max(m,O),v=t[2],g=a?a[0]:void 0,p=[f,s,Object(r.useCallback)(function(e){return K((e-((i-j)/2+(j-m)))/m,0,1)},[m,j,i]),t],h=Object(Ge.a)(function(e,n,t){return Object(He.a)(n.pipe(Object(ne.a)(function(e){return Object(b.a)(e,4)[3]}),Object(Fe.a)($),Object(Ue.a)(void 0)),e.pipe(Object(re.a)(n),Object(Ae.a)(function(e){var n=Object(b.a)(e,2);return!Object(b.a)(n[1],2)[1]}),Object(ne.a)(function(e){var n=Object(b.a)(e,1)[0];return[n.evt instanceof TouchEvent?n.evt.targetTouches[0].pageY:n.evt.pageY,d.current?d.current.getBoundingClientRect().top:0]}),Object(ne.a)(function(e){var n=Object(b.a)(e,2),t=n[0],r=n[1];return[t-r,r]}),Object(te.a)(function(e){var r=Object(b.a)(e,2),c=r[0],a=r[1];return Object(He.a)(Object(Ie.a)(document,"mousemove"),Object(Ie.a)(document,"touchmove")).pipe(Object(ne.a)(function(e){return(e instanceof TouchEvent?e.targetTouches[0].pageY:e.pageY)-a}),Object(We.a)(c),Object(De.a)(Object(He.a)(Object(He.a)(Object(Ie.a)(document,"mouseup"),Object(Ie.a)(document,"touchend")).pipe(Object(re.a)(t,n),Object(Ve.a)(function(e){var n=Object(b.a)(e,3),t=n[1],r=Object(b.a)(n[2],2),c=r[0],a=r[1];"number"===typeof t&&c&&!a&&c([t])})),n.pipe(Object(Ye.a)(1),Object(ne.a)(function(e){return Object(b.a)(e,2)[1]}),Object(Fe.a)(),Object(Ae.a)(function(e){return!!e})),n.pipe(Object(Ye.a)(1),Object(ne.a)(function(e){return Object(b.a)(e,4)[3]}),Object(Fe.a)($)))),Object(re.a)(n),Object(ne.a)(function(e){var n=Object(b.a)(e,2),t=n[0];return(0,Object(b.a)(n[1],3)[2])(t)}))})))},g,p),k=Object(b.a)(h,2),w=k[0],S=k[1];return c.a.createElement("div",{ref:d},c.a.createElement(Re.Stage,{className:n,width:i,height:i},c.a.createElement(Re.Layer,null,c.a.createElement(Re.Rect,{stroke:"#eee",width:i,height:i})),c.a.createElement(Xe,{x:i/3,y:(i-j)/2,lineLength:O,longerLength:j,ratio:v}),c.a.createElement(Xe,{x:i/3*2,y:(i-j)/2,lineLength:m,longerLength:j,ratio:S||void 0,answerRatio:o?v:void 0,onMouseDown:w,onTouchStart:w})))},Ke=function(e){var n=function(e){switch(e){case fe.VerticalLine2:return Je}}(e.type);return n?c.a.createElement(n,e):null};function $e(){var e=Object(s.a)(["\n  font-size: 4rem;\n  width: 2em;\n  padding: 0.2em 0.4em;\n  display: inline-block;\n  text-align: center;\n"]);return $e=function(){return e},e}function qe(){var e=Object(s.a)(["\n  width: ","%;\n  height: 3px;\n  background-color: ",";\n"]);return qe=function(){return e},e}function Qe(){var e=Object(s.a)(["\n  width: 100%;\n"]);return Qe=function(){return e},e}!function(e){e[e.Bar=0]="Bar",e[e.Text=1]="Text"}(Me||(Me={}));var Ze=k.div(Qe()),_e=k.div(qe(),function(e){return 100*(1-e.ratio)},function(e){return e.theme.accent}),en=k.div($e()),nn=function(e){var n=e.className,t=e.duration,a=e.onTimeUp,o=e.id,i=e.enabled,u=e.displayStyle,l=void 0===u?Me.Bar:u,s=Object(r.useState)(0),f=Object(b.a)(s,2),d=f[0],m=f[1],O=Object(r.useState)(t?~~(t/1e3):0),j=Object(b.a)(O,2),v=j[0],g=j[1],p=Object(r.useRef)(a);return p.current=a,Object(r.useEffect)(function(){if(i&&t){m(0),g(0);var e=Date.now(),n=setInterval(function(){var r=Math.min((Date.now()-e)/t,1);m(r),g(Math.ceil((t-(Date.now()-e))/1e3)),1===r&&(clearInterval(n),p.current&&p.current())},17);return function(){return clearInterval(n)}}},[t,i,o]),l===Me.Bar?c.a.createElement(Ze,{className:n},t&&c.a.createElement(_e,{ratio:d})):c.a.createElement(en,{className:n},v)};function tn(){var e=Object(s.a)(["\n            text-align: center;\n          "]);return tn=function(){return e},e}var rn,cn=function(e){var n=e.className,t=e.duration,c=e.onStart,a=Object(r.useState)(!1),o=Object(b.a)(a,2),i=o[0],u=o[1],l=Object(r.useCallback)(function(){u(!0)},[]);return Object(d.d)("div",{className:n},i?Object(d.d)("div",{css:Object(d.c)(tn())},Object(d.d)(nn,{duration:t,enabled:!0,onTimeUp:c,displayStyle:Me.Text})):Object(d.d)(r.Fragment,null,Object(d.d)("div",null,"\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u3092\u59cb\u3081\u308b"),Object(d.d)(G,{onClick:l},"START")))};function an(){var e=Object(s.a)(["\n  display: inline-block;\n"]);return an=function(){return e},e}var on=(rn={},Object(me.a)(rn,le.Legend,{color:"red"}),Object(me.a)(rn,le.Excellent,{color:"red"}),Object(me.a)(rn,le.Good,{color:"red"}),Object(me.a)(rn,le.Bad,{color:"red"}),rn),un=k.svg(an()),ln=function(e){var n=e.className,t=e.score,r=e.small,a=function(e){return e>=.98?le.Legend:e>=.9?le.Excellent:e>=.7?le.Good:le.Bad}(t);return c.a.createElement(un,{rating:a,className:n,version:"1.1",width:r?100:170,height:r?30:50,viewBox:r?"0 0 100 30":"0 0 170 50",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},c.a.createElement("defs",null,c.a.createElement("filter",{id:"inset-shadow"},c.a.createElement("feOffset",{dx:"2",dy:"3"}),c.a.createElement("feGaussianBlur",{stdDeviation:"1",result:"offset-blur"}),c.a.createElement("feComposite",{operator:"out",in:"SourceGraphic",in2:"offset-blur",result:"inverse"}),c.a.createElement("feFlood",{"flood-color":"black","flood-opacity":"0.40",result:"color"}),c.a.createElement("feComposite",{operator:"in",in:"color",in2:"inverse",result:"shadow"}),c.a.createElement("feComposite",{operator:"over",in:"shadow",in2:"SourceGraphic"}))),c.a.createElement("text",{x:"50%",y:"50%","text-anchor":"middle","dominant-baseline":"central",fontSize:r?16:24,fontWeight:"bold",fill:on[a].color,stroke:"#000",strokeWidth:1,filter:"url(#inset-shadow)"},a.toUpperCase()))},sn=function(e){var n=e.className,t=e.scores,r=e.type,a=t.length>0?t.reduce(function(e,n){return e+n},0)/t.length:0;return c.a.createElement("div",{className:n},c.a.createElement("h1",null,he(r)),c.a.createElement("p",null,"Total: ",ve(a)," ",c.a.createElement(ln,{score:a})),c.a.createElement("ul",null,t.map(function(e,n){return c.a.createElement("li",{key:n},c.a.createElement("span",null,n+1,": ",ve(e)),c.a.createElement(ln,{small:!0,score:e}))})," "))};function bn(){var e=Object(s.a)(["\n                margin-top: auto;\n              "]);return bn=function(){return e},e}function fn(){var e=Object(s.a)(["\n                  margin: 0 auto;\n                  width: ","px;\n                "]);return fn=function(){return e},e}function dn(){var e=Object(s.a)(["\n                flex: auto;\n                text-align: center;\n              "]);return dn=function(){return e},e}function mn(){var e=Object(s.a)(["\n                text-align: center;\n                visibility: ",";\n              "]);return mn=function(){return e},e}function On(){var e=Object(s.a)(["\n                position: absolute;\n                top: 0;\n                left: 0;\n              "]);return On=function(){return e},e}function jn(){var e=Object(s.a)(["\n              width: 100%;\n              height: 100%;\n              display: flex;\n              flex-direction: column;\n              box-sizing: border-box;\n            "]);return jn=function(){return e},e}function vn(){var e=Object(s.a)(["\n          width: 100%;\n          height: 100%;\n          box-sizing: border-box;\n        "]);return vn=function(){return e},e}function gn(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        padding: 1em;\n      "]);return gn=function(){return e},e}var pn=function(e){var n=e.className,t=e.type,c=e.scaleCorrection,a=e.level,o=e.onResult,i=e.onFinish,u=Object(r.useRef)(),l=Object(r.useRef)([]),s=Object(r.useMemo)(function(){return function(e,n){var t=new Array(n).fill(0).map(function(){return ge(e)});return t.every(function(e){return"undefined"!==typeof e})?t:void 0}(t,10)},[t]),f=Object(r.useState)(!1),m=Object(b.a)(f,2),O=m[0],j=m[1],v=Object(r.useState)(0),g=Object(b.a)(v,2),p=g[0],h=g[1],k=Object(r.useState)(),w=Object(b.a)(k,2),S=w[0],x=w[1],y=Object(r.useState)(!1),C=Object(b.a)(y,2),E=C[0],N=C[1],T=Object(ze.a)(),L=Object(b.a)(T,2),M=L[0],B=L[1],z=Object(r.useCallback)(function(){if(s&&!(s.length<=p)&&S){var e=pe(t,s[p],S);l.current=[].concat(Object(q.a)(l.current),[e]),N(!0)}},[S,p,s,t]),R=Object(r.useCallback)(function(){s&&(N(!1),x(void 0),h(p+1),s.length<=p+1&&o&&!u.current&&(u.current=new Date,o({datetime:u.current,scores:l.current,type:t,params:s})))},[p,o,s,t]),H=Object(r.useMemo)(function(){return!E&&S&&function(e,n){return n.length===je[e].stateSize}(t,S)},[S,E,t]),I=Object(r.useCallback)(function(){if(s&&!(s.length<=p)){var e=pe(t,s[p],H?S:void 0);l.current=[].concat(Object(q.a)(l.current),[e]),N(!0)}},[S,p,H,s,t]),F=Object(r.useCallback)(function(){j(!0)},[]);if(!s)return null;var U=Math.min(B,500),A=function(e,n){return je[e].duration[n]}(t,a);return Object(d.d)("div",{css:Object(d.c)(gn()),className:n},Object(d.d)("div",{ref:M,css:Object(d.c)(vn())},O?s.length<=p?Object(d.d)(r.Fragment,null,Object(d.d)(sn,{type:t,scores:l.current}),Object(d.d)(G,{onClick:function(){i&&i()}},"Finish")):Object(d.d)("div",{css:Object(d.c)(jn())},Object(d.d)(nn,{css:Object(d.c)(On()),id:p,enabled:!E,duration:A,onTimeUp:I}),Object(d.d)("div",{css:Object(d.c)(mn(),E?"visible":"hidden")},Object(d.d)(ln,{score:l.current.length>0?l.current[l.current.length-1]:0})),Object(d.d)("div",{css:Object(d.c)(dn())},Object(d.d)(Ke,{css:Object(d.c)(fn(),U),type:t,params:s[p],screenSize:U,scaleCorrection:c,isAnswerShown:E,disableOperation:E,onUpdate:x})),Object(d.d)("div",{css:Object(d.c)(bn())},H&&Object(d.d)(G,{onClick:z},"OK"),E&&Object(d.d)(G,{onClick:R},"Next"))):Object(d.d)(cn,{duration:3e3,onStart:F})))},hn=function(e){var n=e.className;return c.a.createElement("div",{className:n})};function kn(){var e=Object(s.a)([""]);return kn=function(){return e},e}function wn(){var e=Object(s.a)(["\n                  margin-left: 1em;\n                "]);return wn=function(){return e},e}function Sn(){var e=Object(s.a)(["\n                  margin-left: 1em;\n                "]);return Sn=function(){return e},e}function xn(){var e=Object(s.a)([""]);return xn=function(){return e},e}function yn(){var e=Object(s.a)(["\n                padding: 0.5em 1em;\n                font-size: 0.9rem;\n                border-top: 1px solid #efefef;\n                display: flex;\n                align-items: center;\n\n                &:first-child {\n                  border-top: none;\n                }\n              "]);return yn=function(){return e},e}function Cn(){var e=Object(s.a)(["\n        background-color: #fff;\n      "]);return Cn=function(){return e},e}var En=function(e){var n=e.className,t=e.histories;return Object(d.d)("div",{className:n,css:Object(d.c)(Cn())},t&&t.map(function(e){var n=e.scores.reduce(function(e,n){return e+n},0)/e.scores.length;return Object(d.d)("div",{key:e.datetime.toISOString(),css:Object(d.c)(yn())},Object(d.d)("div",{css:Object(d.c)(xn())},e.datetime.toLocaleString()),Object(d.d)("div",{css:Object(d.c)(Sn())},he(e.type)),Object(d.d)("div",{css:Object(d.c)(wn())},ve(n),"\u70b9"),Object(d.d)("div",{css:Object(d.c)(kn())},Object(d.d)(ln,{small:!0,score:n})))}))},Nn=function(e){var n=e.className;return c.a.createElement("div",{className:n})},Tn=function(e){var n=e.className;return c.a.createElement("div",{className:n})};function Ln(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: #f0f0f0;\n        padding: 1em;\n      "]);return Ln=function(){return e},e}var Mn=function(e){var n=e.className,t=e.histories;return Object(d.d)("div",{className:n,css:Object(d.c)(Ln())},Object(d.d)(En,{histories:t}),Object(d.d)(hn,null),Object(d.d)(Nn,null),Object(d.d)(Tn,null))};function Bn(){var e=Object(s.a)(["\n                  margin-top: -0.1em;\n                  margin-right: 0.7em;\n                  font-size: 1.2em;\n                  vertical-align: middle;\n                "]);return Bn=function(){return e},e}function zn(){var e=Object(s.a)(["\n              display: block;\n              padding: 0.8em 1em 0.8em ",';\n              user-select: none;\n              cursor: pointer;\n              position: relative;\n              transition: all ease 0.1s;\n              font-size: 0.9rem;\n              border-top: 1px solid #efefef;\n\n              &:after {\n                content: ">";\n                float: right;\n                color: ',";\n                font-size: 0.9rem;\n              }\n\n              &:active:after {\n                color: #fff;\n              }\n\n              &:active {\n                background-color: ",";\n                color: #fff;\n              }\n            "]);return zn=function(){return e},e}function Rn(){var e=Object(s.a)(["\n        margin: 0;\n        padding: 0;\n        background-color: #fff;\n      "]);return Rn=function(){return e},e}var Hn,In=function(e){var n=e.className,t=e.items,r=e.onSelect,c=w(),a=t&&t.some(function(e){return!!e.icon});return Object(d.d)("ul",{className:n,css:Object(d.c)(Rn())},t&&t.map(function(e){return Object(d.d)("li",{css:Object(d.c)(zn(),a&&e.icon?"3em":"1em",c.accent,c.accent),key:e.id,onClick:(n=e.id,function(){r&&r(n)})},e.icon&&Object(d.d)(L.a,{color:e.iconColor,icon:e.icon,css:Object(d.c)(Bn())}),e.label);var n}))};function Fn(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: #f0f0f0;\n      "]);return Fn=function(){return e},e}!function(e){e.ScaleCorrection="scalecorrection",e.SignOut="signout"}(Hn||(Hn={}));var Un=[{id:Hn.ScaleCorrection,label:"\u30b9\u30af\u30ea\u30fc\u30f3\u30b5\u30a4\u30ba\u306e\u88dc\u6b63"},{id:Hn.SignOut,label:"\u30ed\u30b0\u30a2\u30a6\u30c8"}],An=function(e){var n=e.className,t=e.onSelect;return Object(d.d)("div",{className:n,css:Object(d.c)(Fn())},Object(d.d)(In,{items:Un,onSelect:function(e){t&&t(e)}}))};function Wn(){var e=Object(s.a)(["\n            width: 50%;\n            min-width: 300px;\n          "]);return Wn=function(){return e},e}function Dn(){var e=Object(s.a)(["\n          text-align: center;\n          margin: 0 0 5em 0;\n        "]);return Dn=function(){return e},e}function Vn(){var e=Object(s.a)(["\n            width: ","px;\n            height: 3px;\n            background-color: #000;\n            margin: 0 auto;\n          "]);return Vn=function(){return e},e}function Yn(){var e=Object(s.a)(["\n          padding: 5em 0;\n        "]);return Yn=function(){return e},e}function Gn(){var e=Object(s.a)(["\n          text-align: center;\n          margin: 0;\n          padding: 2em 0;\n        "]);return Gn=function(){return e},e}var Pn=function(e){var n=e.className,t=e.scaleCorrection,c=e.onEnter,a=Object(r.useState)("number"===typeof t?t:50),o=Object(b.a)(a,2),i=o[0],u=o[1];Object(r.useEffect)(function(){"number"===typeof t&&u(100*(t-.5))},[t]);var l=i/100+.5;return Object(d.d)("div",{className:n},Object(d.d)("p",{css:Object(d.c)(Gn())},"\u68d2\u306e\u9577\u3055\u304c ",3,"cm \u306b\u306a\u308b\u3088\u3046\u306b\u8abf\u6574\u3057\u3066\u304f\u3060\u3055\u3044"),Object(d.d)("div",{css:Object(d.c)(Yn())},Object(d.d)("div",{css:Object(d.c)(Vn(),150*l)})),Object(d.d)("p",{css:Object(d.c)(Dn())},Object(d.d)("input",{type:"range",min:0,max:100,value:i,onChange:function(e){return u(parseFloat(e.currentTarget.value))},css:Object(d.c)(Wn())})),Object(d.d)(G,{onClick:function(){c&&c(l)}},"OK"))};function Xn(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        padding: 1em;\n      "]);return Xn=function(){return e},e}var Jn,Kn=function(e){var n=e.className,t=e.scaleCorrection,r=e.onScaleCorrectionEnter;return Object(d.d)("div",{className:n,css:Object(d.c)(Xn())},Object(d.d)(Pn,{scaleCorrection:t,onEnter:r}))};function $n(){var e=Object(s.a)(["\n          width: 100%;\n          height: 100%;\n        "]);return $n=function(){return e},e}!function(e){e[e.Home=0]="Home",e[e.TrainingMenu=1]="TrainingMenu",e[e.TrainingLevel=2]="TrainingLevel",e[e.Training=3]="Training",e[e.Report=4]="Report",e[e.Setting=5]="Setting",e[e.ScaleCorrection=6]="ScaleCorrection",e[e.ScaleCorrectionFirst=7]="ScaleCorrectionFirst"}(Jn||(Jn={}));var qn=Object(f.hot)(function(){var e=Object(r.useMemo)(function(){var e=localStorage.getItem("katachi.scaleCorrection");return e?K(2,0,parseFloat(e)):void 0},[]),n=Object(r.useState)(e||1),t=Object(b.a)(n,2),c=t[0],a=t[1],o=Object(r.useState)(),i=Object(b.a)(o,2),s=i[0],f=i[1];Object(r.useEffect)(function(){c?localStorage.setItem("katachi.scaleCorrection",c.toString()):localStorage.removeItem("katachi.scaleCorrection")},[c]);var m=[Object(ce.a)(function(){return Object(Z.a)(ie).pipe(Object(ne.a)(function(e){return e?e.uid:X.SignedOut}))},X.Loading),Object(r.useCallback)(function(){return ie.signInWithRedirect(oe)},[]),Object(r.useCallback)(function(){return ie.signOut()},[])],O=Object(b.a)(m,3),j=O[0],v=O[1],g=O[2],p=function(e){var n=Object(r.useMemo)(function(){return e?ue.ref("users/".concat(e.replace("/",""),"/histories")):void 0},[e]);return[Object(ce.a)(function(e,n){return e.pipe(Object(te.a)(function(e){var t=Object(b.a)(e,1)[0];return t?Object(_.a)(t).pipe(Object(re.a)(n),Object(ne.a)(function(e){var n=Object(b.a)(e,2),t=n[0],r=n[1];return[].concat(Object(q.a)(r),Object(q.a)(t.map(function(e){return[e.snapshot.key,e.snapshot.val()]}).map(function(e){var n=Object(b.a)(e,2)[1];return{datetime:new Date(n.datetime),type:n.type,params:n.params,scores:n.scores}})))})):Object(ee.a)([])}))},[],[n]),Object(r.useCallback)(function(e){return n?n.push({datetime:e.datetime.getTime(),type:e.type,params:e.params,scores:e.scores}).then(function(){}):Promise.reject()},[n])]}("string"===typeof j?j:void 0),h=Object(b.a)(p,2),k=h[0],w=h[1],y=Object(r.useState)(Jn.Home),C=Object(b.a)(y,2),E=C[0],T=C[1];return Object(r.useEffect)(function(){"string"===typeof j&&E===Jn.Home&&T(e?Jn.TrainingMenu:Jn.ScaleCorrectionFirst)},[E,e,j]),Object(d.d)(S,null,Object(d.d)(x,null),Object(d.d)(D,{css:Object(d.c)($n()),currentMode:E===Jn.Training||E===Jn.TrainingMenu||E===Jn.TrainingLevel?N.Training:E===Jn.Report?N.Report:E===Jn.Setting||E===Jn.ScaleCorrection?N.Setting:void 0,navHidden:E===Jn.Home||E===Jn.Training||E===Jn.ScaleCorrectionFirst,onModeChange:function(e){e===N.Training&&T(Jn.TrainingMenu),e===N.Report&&T(Jn.Report),e===N.Setting&&T(Jn.Setting)},headerClosable:E===Jn.Training,onHeaderClose:function(){T(Jn.TrainingMenu),f(void 0)},headerBackButtonVisible:E===Jn.TrainingLevel||E===Jn.ScaleCorrection,onHeaderBackButtonClick:function(){E===Jn.TrainingLevel&&T(Jn.TrainingMenu),E===Jn.ScaleCorrection&&T(Jn.Setting)}},E===Jn.Home&&j===X.SignedOut&&Object(d.d)(J,{onSignIn:function(){v()}}),E===Jn.TrainingMenu&&Object(d.d)(ye,{onSelect:function(e){f([e,void 0]),T(Jn.TrainingLevel)}}),E===Jn.TrainingLevel&&Object(d.d)(Be,{onSelect:function(e){f(function(n){return n?[n[0],e]:void 0}),T(Jn.Training)}}),E===Jn.Training&&s&&s[1]&&Object(d.d)(pn,{type:s[0],level:s[1],scaleCorrection:c,onResult:function(e){w(e)},onFinish:function(){T(Jn.TrainingMenu)}}),E===Jn.Report&&Object(d.d)(Mn,{histories:k}),E===Jn.Setting&&Object(d.d)(An,{onSelect:function(){var e=Object(l.a)(u.a.mark(function e(n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n===Hn.ScaleCorrection&&T(Jn.ScaleCorrection),n!==Hn.SignOut){e.next=5;break}return e.next=4,g();case 4:T(Jn.Home);case 5:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()}),(E===Jn.ScaleCorrection||E===Jn.ScaleCorrectionFirst)&&Object(d.d)(Kn,{scaleCorrection:c,onScaleCorrectionEnter:function(e){a(e),E===Jn.ScaleCorrectionFirst?T(Jn.TrainingMenu):T(Jn.Setting)}})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(qn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},95:function(e,n,t){e.exports=t(156)}},[[95,1,2]]]);
//# sourceMappingURL=main.a0d24bc5.chunk.js.map