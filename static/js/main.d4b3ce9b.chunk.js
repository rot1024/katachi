(window.webpackJsonpkatachi=window.webpackJsonpkatachi||[]).push([[0],{156:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(81),i=n.n(c),o=n(66),u=n.n(o),l=n(82),s=n(3),b=n(2),f=n(1),d=n(94),m=n(85),O=n(43),j=n(58);function h(){var e=Object(s.a)(['\n  body {\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",\n      "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans",\n      "Helvetica Neue", sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  html,\n  body,\n  #root {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  html {\n    position: fixed;\n  }\n']);return h=function(){return e},e}O.b.add(j.b,j.a,j.c);var v={accent:"tomato",inactive:"#aaa"},p=Object(f.c)(h()),g=d.a,S=function(){return Object(r.useContext)(f.b)},k=function(e){var t=e.children;return a.a.createElement(m.a,{theme:v},t)},y=function(){return a.a.createElement(f.a,{styles:p})};function w(){var e=Object(s.a)(["\n            width: 2.5em;\n            height: 2.5em;\n            line-height: 2.5em;\n            position: absolute;\n            top: 0;\n            right: 0;\n            cursor: pointer;\n            user-select: none;\n            text-align: center;\n            color: #888;\n            font-size: 20px;\n          "]);return w=function(){return e},e}function E(){var e=Object(s.a)(["\n            width: 2.5em;\n            height: 2.5em;\n            line-height: 2.5em;\n            position: absolute;\n            top: 0;\n            left: 0;\n            cursor: pointer;\n            user-select: none;\n            text-align: center;\n            color: #888;\n            font-size: 20px;\n          "]);return E=function(){return e},e}function x(){var e=Object(s.a)(["\n        font-size: 1.2rem;\n        height: 2.5em;\n        line-height: 2.5em;\n        padding: 0 1em;\n        color: ",";\n        font-weight: bold;\n        text-align: center;\n      "]);return x=function(){return e},e}var C,z=function(e){var t=e.className,n=e.hidden,r=e.closable,a=e.onClose,c=e.backButtonVisible,i=e.onBackButtonClick,o=S();return n?null:Object(f.d)("div",{css:Object(f.c)(x(),o.accent),className:t},c&&Object(f.d)("div",{css:Object(f.c)(E()),onClick:i},"<"),"katachi",r&&Object(f.d)("div",{css:Object(f.c)(w()),onClick:a},"\xd7"))},L=n(49);function H(){var e=Object(s.a)(["\n  display: block;\n  margin: 0 auto 0.2em;\n  font-size: 1.5rem;\n"]);return H=function(){return e},e}function N(){var e=Object(s.a)(["\n  flex: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  text-align: center;\n  font-size: 0.8rem;\n  font-weight: bold;\n  color: ",";\n  flex: 1 1 0;\n  user-select: none;\n"]);return N=function(){return e},e}function M(){var e=Object(s.a)(["\n  display: flex;\n  align-items: stretch;\n  height: 4em;\n"]);return M=function(){return e},e}!function(e){e[e.Training=0]="Training",e[e.Report=1]="Report",e[e.Setting=2]="Setting"}(C||(C={}));var T=g.div(M()),R=g.div(N(),function(e){var t=e.active,n=e.theme;return t?n.accent:n.inactive}),W=g(L.a)(H()),U=function(e){var t=e.className,n=e.selected,r=e.onSelect;return a.a.createElement(T,{className:t},a.a.createElement(R,{active:n===C.Training,onClick:function(){return r&&r(C.Training)}},a.a.createElement("div",null,a.a.createElement(W,{icon:"shapes"}),"\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0")),a.a.createElement(R,{active:n===C.Report,onClick:function(){return r&&r(C.Report)}},a.a.createElement("div",null,a.a.createElement(W,{icon:"chart-line"}),"\u30ec\u30dd\u30fc\u30c8")),a.a.createElement(R,{active:n===C.Setting,onClick:function(){return r&&r(C.Setting)}},a.a.createElement("div",null,a.a.createElement(W,{icon:"sliders-h"}),"\u8a2d\u5b9a")))};function B(){var e=Object(s.a)(["\n          display: ",";\n        "]);return B=function(){return e},e}function F(){var e=Object(s.a)(["\n          position: relative;\n          flex: auto;\n          overflow: hidden;\n        "]);return F=function(){return e},e}function V(){var e=Object(s.a)(["\n        position: relative;\n        display: flex;\n        flex-direction: column;\n      "]);return V=function(){return e},e}var q=function(e){var t=e.className,n=e.children,r=e.currentMode,a=e.navHidden,c=e.onModeChange,i=e.headerClosable,o=e.onHeaderClose,u=e.headerBackButtonVisible,l=e.onHeaderBackButtonClick;return Object(f.d)("div",{className:t,css:Object(f.c)(V())},Object(f.d)("header",null,Object(f.d)(z,{closable:i,onClose:o,backButtonVisible:u,onBackButtonClick:l})),Object(f.d)("main",{role:"main",css:Object(f.c)(F())},n),Object(f.d)("nav",{css:Object(f.c)(B(),a?"none":"block")},Object(f.d)(U,{selected:r,onSelect:c})))};function P(){var e=Object(s.a)(["\n  display: inline-block;\n  width: 100%;\n  font-size: 14px;\n  border-radius: 0.5em;\n  border: none;\n  outline: none;\n  background-color: ",";\n  color: #fff;\n  padding: 1em 3em;\n  box-shadow: 0 0.1em 0.5em #00000030;\n  cursor: pointer;\n  user-select: none;\n  transition: all ease 0.1s;\n\n  &:hover {\n    filter: brightness(120%);\n  }\n\n  &:active {\n    filter: brightness(100%);\n    transform: translateY(1px);\n  }\n"]);return P=function(){return e},e}var D=g.button(P(),function(e){return e.theme.accent}),A=function(e){var t=e.className,n=e.children,r=e.onClick;return a.a.createElement(D,{className:t,onClick:r},n?n.toUpperCase():"")};function I(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        padding: 1em;\n      "]);return I=function(){return e},e}var X,G=function(e){var t=e.className,n=e.onSignIn;return Object(f.d)("div",{className:t,css:Object(f.c)(I())},Object(f.d)("h1",null,'\u5f62\u3092\u6b63\u78ba\u306b\u89b3\u308b "\u773c" \u3092\u990a\u3046\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0'),Object(f.d)(A,{onClick:n},"Twitter\u3067\u30ed\u30b0\u30a4\u30f3"))},Y=n(24),J=function(e,t,n){return e>n?n:e<t?t:e},K=function(e,t){return e.length===t.length&&e.every(function(e,n){return e===t[n]})},$=function(e,t,n){return[].concat(Object(Y.a)(e.length>=t?e.slice(0,t):e.concat(new Array(t-e.length).fill(void 0))),[n],Object(Y.a)(e.slice(t+1)))},Q=function(e,t,n,r){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))},Z=n(46),_=(n(107),n(109),n(89)),ee=n(93),te=n(44),ne=n(37),re=n(90),ae=n(161),ce=Z.initializeApp({apiKey:"AIzaSyBkXkX7PIAhCXvnTau7lzrb1AOWbJXoa8I",authDomain:"katachi-25f71.firebaseapp.com",databaseURL:"https://katachi-25f71.firebaseio.com",projectId:"katachi-25f71",storageBucket:"katachi-25f71.appspot.com",messagingSenderId:"1057352886357",appId:"1:1057352886357:web:5e0e73ee245b501c"}),ie=new Z.auth.TwitterAuthProvider,oe=Z.auth(ce),ue=Z.database(ce);!function(e){e[e.Loading=0]="Loading",e[e.SignedOut=1]="SignedOut"}(X||(X={}));var le,se,be,fe,de,me=n(4);(se=le||(le={})).Legend="legend",se.Excellent="excellent",se.Good="good",se.Bad="bad",function(e){e.Easy="easy",e.Normal="normal",e.Hard="hard",e.Ultimate="ultimate"}(be||(be={})),function(e){e.VerticalLine1="verticalLine1",e.VerticalLine2="verticalLine2",e.HorizontalLine1="horizontailLine1",e.HorizontalLine2="horizontalLine2",e.Square="square",e.SquareVerticalLine="squareVerticalLine",e.SquareHorizontalLine="squareHorizontalLine",e.SquareSkewedLine="squareSkewedLine",e.SquarePoint="squarePoint",e.SquareDogleggedLine="squareDogleggedLine"}(fe||(fe={}));var Oe,je,he,ve,pe,ge,Se,ke,ye,we,Ee={title:"\u5782\u76f4\u306a\u68d2\u306e\u6bd4\u7387 1\u70b9",paramsSize:3,stateSize:1,duration:(de={},Object(me.a)(de,be.Easy,1/0),Object(me.a)(de,be.Normal,15e3),Object(me.a)(de,be.Hard,4e3),Object(me.a)(de,be.Ultimate,1e3),de),validateParams:function(e){var t=Object(b.a)(e,3),n=t[0],r=t[1],a=t[2];return n>.3&&r>.3&&Math.abs(n-r)>=.2&&a>.1&&a<.9},judgeScore:function(e,t){if(0===e[0]||!t||"number"!==typeof t[0])return 0;var n=.3-.1*e[0];return 1-Math.min(n,Math.abs(e[2]-t[0]))/n}},xe={title:"\u5782\u76f4\u306a\u68d2\u306e\u6bd4\u7387 2\u70b9",paramsSize:4,stateSize:2,duration:(Oe={},Object(me.a)(Oe,be.Easy,1/0),Object(me.a)(Oe,be.Normal,3e4),Object(me.a)(Oe,be.Hard,1e4),Object(me.a)(Oe,be.Ultimate,3e3),Oe),validateParams:function(e){var t=Object(b.a)(e,4),n=t[0],r=t[1],a=t[2],c=t[3];return n>.3&&r>.3&&Math.abs(n-r)>=.2&&a>.1&&a<.9&&c>.1&&c<.9&&c-a>.3},judgeScore:function(e,t){if(0===e[0]||!t)return 0;var n=.3-.1*e[0];return t.slice(0,2).sort().map(function(t,r){return"number"===typeof t?1-Math.min(n,Math.abs(e[2+r]-t))/n:0}).reduce(function(e,t){return e+t},0)/t.length}},Ce={title:"\u6c34\u5e73\u306a\u68d2\u306e\u6bd4\u7387 1\u70b9",paramsSize:3,stateSize:1,duration:(je={},Object(me.a)(je,be.Easy,1/0),Object(me.a)(je,be.Normal,15e3),Object(me.a)(je,be.Hard,4e3),Object(me.a)(je,be.Ultimate,1e3),je),validateParams:function(e){var t=Object(b.a)(e,3),n=t[0],r=t[1],a=t[2];return n>.3&&r>.3&&Math.abs(n-r)>=.2&&a>.1&&a<.9},judgeScore:function(e,t){if(0===e[0]||!t||"number"!==typeof t[0])return 0;var n=.3-.1*e[0];return 1-Math.min(n,Math.abs(e[2]-t[0]))/n}},ze={title:"\u6c34\u5e73\u306a\u68d2\u306e\u6bd4\u7387 2\u70b9",paramsSize:4,stateSize:2,duration:(he={},Object(me.a)(he,be.Easy,1/0),Object(me.a)(he,be.Normal,3e4),Object(me.a)(he,be.Hard,1e4),Object(me.a)(he,be.Ultimate,3e3),he),validateParams:function(e){var t=Object(b.a)(e,4),n=t[0],r=t[1],a=t[2],c=t[3];return n>.3&&r>.3&&Math.abs(n-r)>=.2&&a>.1&&a<.9&&c>.1&&c<.9&&c-a>.3},judgeScore:function(e,t){if(0===e[0]||!t)return 0;var n=.3-.1*e[0];return t.slice(0,2).sort().map(function(t,r){return"number"===typeof t?1-Math.min(n,Math.abs(e[2+r]-t))/n:0}).reduce(function(e,t){return e+t},0)/t.length}},Le={title:"\u9577\u65b9\u5f62\u3092\u6b63\u65b9\u5f62\u306b",paramsSize:2,stateSize:1,duration:(ve={},Object(me.a)(ve,be.Easy,1/0),Object(me.a)(ve,be.Normal,15e3),Object(me.a)(ve,be.Hard,4e3),Object(me.a)(ve,be.Ultimate,1e3),ve),validateParams:function(e){var t=Object(b.a)(e,2),n=t[0],r=t[1];return n>.2&&r>.2&&r-n>.3},judgeScore:function(e,t){if(0===e[1]||!t||"number"!==typeof t[0])return 0;var n=.2-.1*e[1];return 1-Math.min(n,Math.abs(1-e[0]/e[1]-t[0]))/n}},He={title:"\u6b63\u65b9\u5f62\u3068\u5782\u76f4\u7dda",paramsSize:2,stateSize:1,duration:(pe={},Object(me.a)(pe,be.Easy,1/0),Object(me.a)(pe,be.Normal,1e4),Object(me.a)(pe,be.Hard,3e3),Object(me.a)(pe,be.Ultimate,1e3),pe),validateParams:function(e){var t=Object(b.a)(e,2),n=t[0],r=t[1];return n>.2&&r>.1&&r<.9},judgeScore:function(e,t){if(0===e[1]||!t||"number"!==typeof t[0])return 0;var n=.25-.1*e[0];return t?1-Math.min(n,Math.abs(e[1]-t[0]))/n:0}},Ne={title:"\u6b63\u65b9\u5f62\u3068\u6c34\u5e73\u7dda",paramsSize:2,stateSize:1,duration:(ge={},Object(me.a)(ge,be.Easy,1/0),Object(me.a)(ge,be.Normal,1e4),Object(me.a)(ge,be.Hard,3e3),Object(me.a)(ge,be.Ultimate,1e3),ge),validateParams:function(e){var t=Object(b.a)(e,2),n=t[0],r=t[1];return n>.2&&r>.1&&r<.9},judgeScore:function(e,t){if(0===e[1]||!t||"number"!==typeof t[0])return 0;var n=.25-.1*e[0];return t?1-Math.min(n,Math.abs(e[1]-t[0]))/n:0}},Me={title:"\u6b63\u65b9\u5f62\u3068\u659c\u3081\u306e\u7dda",paramsSize:2,stateSize:2,duration:(Se={},Object(me.a)(Se,be.Easy,1/0),Object(me.a)(Se,be.Normal,3e4),Object(me.a)(Se,be.Hard,1e4),Object(me.a)(Se,be.Ultimate,3e3),Se),validateParams:function(e){var t=Object(b.a)(e,2),n=t[0],r=t[1];return n>.1&&n<.9&&r>.1&&r<.9&&Math.abs(n-r)>.3},judgeScore:function(e,t){if(!t)return 0;return t.map(function(t,n){return"number"===typeof t?1-Math.min(.2,Math.abs(e[n]-t))/.2:0}).reduce(function(e,t){return e+t},0)/2}},Te={title:"\u6b63\u65b9\u5f62\u306e\u4e2d\u306e\u70b9",paramsSize:2,stateSize:2,duration:(ke={},Object(me.a)(ke,be.Easy,1/0),Object(me.a)(ke,be.Normal,3e4),Object(me.a)(ke,be.Hard,1e4),Object(me.a)(ke,be.Ultimate,3e3),ke),validateParams:function(e){var t=Object(b.a)(e,2),n=t[0],r=t[1];return n>.1&&n<.9&&r>.1&&r<.9},judgeScore:function(e,t){if(!t||"number"!==typeof t[0]||"number"!==typeof t[1])return 0;var n=Q(t[0],t[1],e[0],e[1]);return 1-Math.min(.2,n)/.2}},Re={title:"\u6b63\u65b9\u5f62\u3068\u304f\u306e\u5b57",paramsSize:4,stateSize:4,duration:(ye={},Object(me.a)(ye,be.Easy,1/0),Object(me.a)(ye,be.Normal,4e4),Object(me.a)(ye,be.Hard,15e3),Object(me.a)(ye,be.Ultimate,5e3),ye),validateParams:function(e){var t=Object(b.a)(e,4),n=t[0],r=t[1],a=t[2],c=t[3];return n>.1&&n<.9&&r>.1&&r<.9&&a>.1&&a<.9&&c>.3&&c<.7&&(Math.max(n,r)<a||Math.min(n,r)>a)&&Math.abs(n-r)>.3&&Math.abs(n-a)>.1&&Math.abs(r-a)>.1},judgeScore:function(e,t){if(!t)return 0;var n="number"!==typeof t[2]||"number"!==typeof t[3]?0:1-Math.min(.2,Q(t[2],t[3],e[2],e[3]))/.2;return t.slice(0,2).map(function(t,n){return"number"===typeof t?1-Math.min(.2,Math.abs(e[n]-t))/.2:0}).concat([n,n]).reduce(function(e,t){return e+t},0)/4}},We=(we={},Object(me.a)(we,fe.VerticalLine1,Ee),Object(me.a)(we,fe.VerticalLine2,xe),Object(me.a)(we,fe.HorizontalLine1,Ce),Object(me.a)(we,fe.HorizontalLine2,ze),Object(me.a)(we,fe.Square,Le),Object(me.a)(we,fe.SquareVerticalLine,He),Object(me.a)(we,fe.SquareHorizontalLine,Ne),Object(me.a)(we,fe.SquareSkewedLine,Me),Object(me.a)(we,fe.SquarePoint,Te),Object(me.a)(we,fe.SquareDogleggedLine,Re),we),Ue=function(e){return Math.round(100*e)},Be=function(e){for(var t=We[e],n=0;n<1e3;n++){var r=new Array(t.paramsSize).fill(0).map(function(){return Math.random()}),a=t.validateParams(r);if(Array.isArray(a))return a;if(a)return r}},Fe=function(e,t,n){return We[e].judgeScore(t,n)},Ve=function(e){return We[e].title};function qe(){var e=Object(s.a)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  max-width: 200px;\n  max-height: 200px;\n  width: calc(50vw - 0.6em);\n  height: calc(50vw - 0.6em);\n  vertical-align: middle;\n  user-select: none;\n  border-radius: 0.5em;\n  box-shadow: 0 0.1em 0.5em #00000030;\n  cursor: pointer;\n  transition: all ease 0.1s;\n  background-color: ",";\n  color: #fff;\n  box-sizing: border-box;\n  margin: 0.3em;\n\n  &:hover {\n    filter: brightness(105%);\n  }\n\n  &:active {\n    filter: brightness(100%);\n    transform: translateY(1px);\n  }\n"]);return qe=function(){return e},e}var Pe=g.div(qe(),function(e){return e.bgcolor||"#bbb"}),De=function(e){var t=e.className,n=e.onSelect,a=Object(r.useCallback)(function(e){return n?function(){return n(e)}:void 0},[n]);return Object(f.d)("div",{className:t},Object.keys(We).map(function(e){return Object(f.d)(Pe,{key:e,onClick:a(e)},Ve(e))}))};function Ae(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      "]);return Ae=function(){return e},e}var Ie=function(e){var t=e.className,n=e.onSelect;return Object(f.d)("div",{className:t,css:Object(f.c)(Ae())},Object(f.d)(De,{onSelect:n}))};function Xe(){var e=Object(s.a)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  max-width: 200px;\n  max-height: 200px;\n  width: calc(50vw - 0.6em);\n  height: calc(50vw - 0.6em);\n  vertical-align: middle;\n  user-select: none;\n  border-radius: 0.5em;\n  box-shadow: 0 0.1em 0.5em #00000030;\n  cursor: pointer;\n  transition: all ease 0.1s;\n  background-color: ",";\n  color: #fff;\n  box-sizing: border-box;\n  margin: 0.3em;\n\n  &:hover {\n    filter: brightness(105%);\n  }\n\n  &:active {\n    filter: brightness(100%);\n    transform: translateY(1px);\n  }\n"]);return Xe=function(){return e},e}var Ge=[[be.Easy,"Easy"],[be.Normal,"Normal"],[be.Hard,"Hard"],[be.Ultimate,"Ultimate"]],Ye=g.div(Xe(),function(e){return e.bgcolor||"#bbb"}),Je=function(e){var t=e.className,n=e.onSelect,a=Object(r.useCallback)(function(e){return n?function(){return n(e)}:void 0},[n]);return Object(f.d)("div",{className:t},Ge.map(function(e){var t=Object(b.a)(e,2),n=t[0],r=t[1];return Object(f.d)(Ye,{key:n,onClick:a(n)},r)}))};function Ke(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      "]);return Ke=function(){return e},e}var $e,Qe=function(e){var t=e.className,n=e.onSelect;return Object(f.d)("div",{className:t,css:Object(f.c)(Ke())},Object(f.d)(Je,{onSelect:n}))},Ze=n(91),_e=n(5),et=n(162),tt=n(160),nt=n(163),rt=n(164),at=n(165),ct=n(167),it=n(168),ot=n(169),ut=n(170),lt=n(159),st=n(166),bt=function(e){return e instanceof TouchEvent?[e.targetTouches[0].pageX,e.targetTouches[0].pageY]:[e.pageX,e.pageY]},ft=function(e){var t=[e.onUpdate,e.disableOperation,e.calcStateFromPos,e.params],n=e.wrapperRef||Object(r.useRef)(null),a=Object(et.a)(function(e,t,r){return Object(lt.a)(t.pipe(Object(ne.a)(function(e){return Object(b.a)(e,4)[3]}),Object(tt.a)(K),Object(nt.a)([])),e.pipe(Object(rt.a)(t,r),Object(at.a)(function(e){var t=Object(b.a)(e,2);return!Object(b.a)(t[1],2)[1]}),Object(ne.a)(function(e){var t=Object(b.a)(e,3),r=Object(b.a)(t[0],2),a=r[0],c=r[1],i=t[2];return[bt(a.evt),n.current?[n.current.getBoundingClientRect().left,n.current.getBoundingClientRect().top]:[],c,0===i.length,i]}),Object(at.a)(function(e){return Object(b.a)(e,2)[1].length>0}),Object(re.a)(function(e){var n=Object(b.a)(e,5),a=n[0],c=n[1],i=n[2],o=n[3],u=n[4];return Object(lt.a)(Object(st.a)(document,"mousemove"),Object(st.a)(document,"touchmove")).pipe(Object(ct.a)(Object(lt.a)(Object(lt.a)(Object(st.a)(document,"mouseup"),Object(st.a)(document,"touchend")).pipe(Object(rt.a)(t,r),Object(it.a)(function(e){var t=Object(b.a)(e,3),n=Object(b.a)(t[1],2),r=n[0],a=n[1],c=t[2];r&&!a&&r(c)})),t.pipe(Object(ot.a)(1),Object(ne.a)(function(e){return Object(b.a)(e,2)[1]}),Object(tt.a)(),Object(at.a)(function(e){return!!e})),t.pipe(Object(ot.a)(1),Object(ne.a)(function(e){return Object(b.a)(e,4)[3]}),Object(tt.a)(K)))),Object(ne.a)(function(e){return bt(e)}),Object(ut.a)(a),Object(rt.a)(t,r),Object(ne.a)(function(e){var t=Object(b.a)(e,3),n=t[0],r=Object(b.a)(t[1],3)[2],l=t[2];return r({x:n[0]-c[0],y:n[1]-c[1],index:i,state:l,dx:n[0]-a[0],dy:n[1]-a[1],firstX:a[0],firstY:a[1],isFirstTime:o,lastState:u}).map(function(e){return"number"===typeof e?J(e,0,1):e})}))})))},e.firstState||[],t),c=Object(b.a)(a,2);return[c[0],c[1],n]},dt=function(e,t){return 200*e*t};!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}($e||($e={}));var mt,Ot=function(e){var t=e.x,n=e.y,r=e.length,c=e.direction,i=e.stroke,o=e.strokeWidth,u=e.whiskerSize;return a.a.createElement(a.a.Fragment,null,a.a.createElement(_e.Line,{points:c===$e.Horizontal?[t,n-u/2,t,n+u/2]:[t-u/2,n,t+u/2,n],stroke:i,strokeWidth:o}),a.a.createElement(_e.Line,{points:c===$e.Horizontal?[t+r,n-u/2,t+r,n+u/2]:[t-u/2,n+r,t+u/2,n+r],stroke:i,strokeWidth:o}),a.a.createElement(_e.Line,{points:c===$e.Horizontal?[t,n,t+r,n]:[t,n,t,n+r],stroke:i,strokeWidth:o}))};!function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(mt||(mt={}));var jt,ht=function(e){var t=e.longerLength,n=e.lineLength,r=e.x,c=e.y,i=e.ratio,o=e.answerRatio,u=e.onMouseDown,l=e.onTouchStart,s=e.direction;e.pointCount;if(0===t||0===n)return null;var b=function(e){return u?function(t){return u(t,e)}:void 0},f=function(e){return l?function(t){return l(t,e)}:void 0},d=s===mt.Horizontal?0:t-n,m=function(e){return s===mt.Horizontal?n*e:t-n*(1-e)};return a.a.createElement(_e.Layer,{x:r,y:c,rotation:s===mt.Horizontal?-90:0},a.a.createElement(Ot,{x:0,y:d,length:n,stroke:"#000",strokeWidth:3,whiskerSize:40}),i&&i.map(function(e,t){return"number"===typeof e?a.a.createElement(_e.Line,{key:t,points:[-20,m(e),20,m(e)],strokeWidth:3,stroke:"#000"}):null}),o&&o.map(function(e,t){return a.a.createElement(_e.Line,{key:t,points:[-20,m(e),20,m(e)],strokeWidth:3,stroke:"#f00"})}),i&&i.map(function(e,t){return"number"===typeof e?a.a.createElement(_e.Line,{key:t,points:[-100,m(e),100,m(e)],strokeWidth:50,onMouseDown:b(t),onTouchStart:f(t),stroke:"transparent"}):null}))};!function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(jt||(jt={}));var vt,pt=function(e){var t=e.className,n=e.params,c=e.state,i=e.isAnswerShown,o=e.screenSize,u=e.scaleCorrection,l=void 0===u?1:u,s=e.disableOperation,f=e.onUpdate,d=e.pointCount,m=e.direction,O=dt(n[0],l),j=dt(n[1],l),h=Math.max(O,j),v=n.slice(2),p=Object(r.useCallback)(function(e){var t=e.x,n=e.y,r=e.index,a=e.state;return $(a,r,m===jt.Horizontal?(t-(o-h)/2)/O:(n-((o-h)/2+(h-O)))/O)},[O,h,o,m]),g=ft({firstState:c,onUpdate:f,disableOperation:s,calcStateFromPos:p,params:n}),S=Object(b.a)(g,3),k=S[0],y=S[1],w=S[2],E=o/3*2,x=o/3,C=(o-h)/2,z=y?y.length>=d?1===y.length?0:null:y.length:0,L=Object(r.useCallback)(function(e){null!==z&&k([e,z])},[k,z]);return a.a.createElement("div",{ref:w,className:t},a.a.createElement(_e.Stage,{width:o,height:o,onMouseDown:L,onTouchStart:L},a.a.createElement(_e.Layer,null,a.a.createElement(_e.Rect,{stroke:"#eee",width:o,height:o})),a.a.createElement(ht,{x:m===jt.Horizontal?C:x,y:m===jt.Horizontal?x:C,lineLength:j,longerLength:h,ratio:v,direction:m,pointCount:d}),a.a.createElement(ht,{x:m===jt.Horizontal?C:E,y:m===jt.Horizontal?E:C,lineLength:O,longerLength:h,ratio:y,answerRatio:i?v:void 0,onMouseDown:function(e,t){return k([e,t])},onTouchStart:function(e,t){return k([e,t])},direction:m,pointCount:d})))},gt=function(e,t){return 300*e*t},St=function(e,t){return(t-e)/2},kt=function(e){var t=e.className,n=e.params,c=e.state,i=e.isAnswerShown,o=e.screenSize,u=e.scaleCorrection,l=void 0===u?1:u,s=e.disableOperation,f=e.onUpdate,d=gt(n[0],l),m=gt(n[1],l),O=function(e,t){return(t-e)/2}(d,o),j=St(m,o),h=function(e,t,n){return St(t,n)+t-e}(d,m,o),v=Object(r.useCallback)(function(e){var t=e.y,n=e.index,r=e.state;return $(r,n,(t-j)/m)},[m,j]),p=ft({firstState:c,onUpdate:f,disableOperation:s,calcStateFromPos:v,params:n}),g=Object(b.a)(p,3),S=g[0],k=g[1],y=g[2];return a.a.createElement("div",{className:t,ref:y},a.a.createElement(_e.Stage,{width:o,height:o,onMouseDown:function(e){return S([e,0])},onTouchStart:function(e){return S([e,0])}},a.a.createElement(_e.Layer,null,a.a.createElement(_e.Rect,{stroke:"#eee",width:o,height:o}),a.a.createElement(_e.Rect,{x:O,y:j,width:d,height:m,strokeWidth:3,stroke:"#000"}),!!k&&"number"===typeof k[0]&&a.a.createElement(_e.Line,{points:[O,j+m*k[0],O+d,j+m*k[0]],stroke:"#000",strokeWidth:3}),i&&a.a.createElement(_e.Line,{points:[O,h,O+d,h],stroke:"#f00",strokeWidth:3}))))};!function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(vt||(vt={}));var yt,wt=function(e){var t=e.className,n=e.params,c=e.state,i=e.isAnswerShown,o=e.screenSize,u=e.scaleCorrection,l=void 0===u?1:u,s=e.disableOperation,f=e.onUpdate,d=e.direction,m=void 0===d?vt.Vertical:d,O=function(e,t){return 150*e*t}(n[0],l),j=m===vt.Horizontal?(o-O)/2:(o-2*O-20)/2,h=m===vt.Horizontal?(o-2*O-20)/2:(o-O)/2,v=m===vt.Horizontal?j:j+20+O,p=m===vt.Horizontal?h+20+O:h,g=Object(r.useCallback)(function(e){var t=e.x,n=e.y,r=e.index,a=e.state;return $(a,r,(m===vt.Horizontal?n-p:t-v)/O)},[m,p,v,O]),S=ft({firstState:c,onUpdate:f,disableOperation:s,calcStateFromPos:g,params:n}),k=Object(b.a)(S,3),y=k[0],w=k[1],E=k[2];return a.a.createElement("div",{className:t,ref:E},a.a.createElement(_e.Stage,{width:o,height:o,onMouseDown:function(e){return y([e,0])},onTouchStart:function(e){return y([e,0])}},a.a.createElement(_e.Layer,null,a.a.createElement(_e.Rect,{stroke:"#eee",width:o,height:o}),a.a.createElement(_e.Rect,{x:j,y:h,width:O,height:O,strokeWidth:3,stroke:"#000"}),a.a.createElement(_e.Rect,{x:v,y:p,width:O,height:O,strokeWidth:3,stroke:"#000"}),a.a.createElement(_e.Line,{points:[m===vt.Horizontal?j:j+O*n[1],m===vt.Horizontal?h+O*n[1]:h,m===vt.Horizontal?j+O:j+O*n[1],m===vt.Horizontal?h+O*n[1]:h+O],stroke:"#000",strokeWidth:3}),!!w&&"number"===typeof w[0]&&a.a.createElement(_e.Line,{points:[m===vt.Horizontal?v:v+O*w[0],m===vt.Horizontal?p+O*w[0]:p,m===vt.Horizontal?v+O:v+O*w[0],m===vt.Horizontal?p+O*w[0]:p+O],stroke:"#000",strokeWidth:3}),i&&a.a.createElement(_e.Line,{points:[m===vt.Horizontal?v:v+O*n[1],m===vt.Horizontal?p+O*n[1]:p,m===vt.Horizontal?v+O:v+O*n[1],m===vt.Horizontal?p+O*n[1]:p+O],stroke:"#f00",strokeWidth:3}))))},Et=function(e){var t=e.className,n=e.params,c=e.state,i=e.isAnswerShown,o=e.screenSize,u=e.scaleCorrection,l=void 0===u?1:u,s=e.disableOperation,f=e.onUpdate,d=function(e){return 150*e}(l),m=(o-2*d-20)/2,O=(o-d)/2,j=m+20+d,h=Object(r.useCallback)(function(e){var t=e.x,n=e.index,r=e.state;return $(r,n,(t-j)/d)},[d,j]),v=ft({firstState:c,onUpdate:f,disableOperation:s,calcStateFromPos:h,params:n}),p=Object(b.a)(v,3),g=p[0],S=p[1],k=p[2],y=S?2===S.length?null:S.length:0;return a.a.createElement("div",{className:t,ref:k},a.a.createElement(_e.Stage,{width:o,height:o,onMouseDown:null!==y?function(e){return g([e,y])}:void 0,onTouchStart:null!==y?function(e){return g([e,y])}:void 0},a.a.createElement(_e.Layer,null,a.a.createElement(_e.Rect,{stroke:"#eee",width:o,height:o}),a.a.createElement(_e.Rect,{x:m,y:O,width:d,height:d,strokeWidth:3,stroke:"#000"}),a.a.createElement(_e.Rect,{x:j,y:O,width:d,height:d,strokeWidth:3,stroke:"#000"}),a.a.createElement(_e.Line,{points:[m+d*n[0],O,m+d*n[1],O+d],stroke:"#000",strokeWidth:3}),!!S&&2===S.length&&"number"===typeof S[0]&&"number"===typeof S[1]&&a.a.createElement(_e.Line,{points:[j+d*S[0],O,j+d*S[1],O+d],stroke:"#000",strokeWidth:3}),!!S&&S.map(function(e,t){return"number"===typeof e?a.a.createElement(_e.Circle,{key:t,x:j+d*e,y:1===t?O+d:O,radius:4,fill:"black"}):null}),!!S&&S.map(function(e,t){return a.a.createElement(_e.Line,{key:t,points:[j-20,0===t?O:O+d,j+d+20,0===t?O:O+d],strokeWidth:20,stroke:"transparent",onMouseDown:function(e){return g([e,t])},onTouchStart:function(e){return g([e,t])}})}),i&&a.a.createElement(_e.Line,{points:[j+d*n[0],O,j+d*n[1],O+d],stroke:"#f00",strokeWidth:3}))))},xt=function(e){var t=e.className,n=e.params,c=e.state,i=e.isAnswerShown,o=e.screenSize,u=e.scaleCorrection,l=void 0===u?1:u,s=e.disableOperation,f=e.onUpdate,d=function(e){return 150*e}(l),m=(o-2*d-20)/2,O=(o-d)/2,j=m+20+d,h=Object(r.useCallback)(function(e){var t=e.x,n=e.y,r=e.dx,a=e.dy,c=e.isFirstTime,i=e.lastState;return c?[(t-j)/d,(n-O)/d]:"number"===typeof i[0]&&"number"===typeof i[1]?[(i[0]*d+r)/d,(i[1]*d+a)/d]:[]},[j,d,O]),v=ft({firstState:c,onUpdate:f,disableOperation:s,calcStateFromPos:h,params:n}),p=Object(b.a)(v,3),g=p[0],S=p[1],k=p[2];return a.a.createElement("div",{className:t,ref:k},a.a.createElement(_e.Stage,{width:o,height:o,onMouseDown:function(e){return g([e,-1])},onTouchStart:function(e){return g([e,-1])}},a.a.createElement(_e.Layer,null,a.a.createElement(_e.Rect,{stroke:"#eee",width:o,height:o}),a.a.createElement(_e.Rect,{x:m,y:O,width:d,height:d,strokeWidth:3,stroke:"#000"}),a.a.createElement(_e.Rect,{x:j,y:O,width:d,height:d,strokeWidth:3,stroke:"#000"}),a.a.createElement(_e.Circle,{x:m+d*n[0],y:O+d*n[1],fill:"#000",radius:3}),!!S&&2===S.length&&"number"===typeof S[0]&&"number"===typeof S[1]&&a.a.createElement(_e.Circle,{x:j+d*S[0],y:O+d*S[1],fill:"#000",radius:3}),i&&a.a.createElement(_e.Circle,{x:j+d*n[0],y:O+d*n[1],fill:"#f00",radius:3}))))},Ct=function(e){var t=e.className,n=e.params,c=e.state,i=e.isAnswerShown,o=e.screenSize,u=e.scaleCorrection,l=void 0===u?1:u,s=e.disableOperation,f=e.onUpdate,d=function(e){return 150*e}(l),m=(o-2*d-20)/2,O=(o-d)/2,j=m+20+d,h=Object(r.useCallback)(function(e){var t=e.x,n=e.y,r=e.dx,a=e.dy,c=e.index,i=e.isFirstTime,o=e.lastState,u=e.state;return c>=2?[u[0],u[1],(i||!o[2]?t-j:o[2]*d+r)/d,(i||!o[3]?n-O:o[3]*d+a)/d]:$(u,c,(t-j)/d)},[j,d,O]),v=ft({firstState:c,onUpdate:f,disableOperation:s,calcStateFromPos:h,params:n}),p=Object(b.a)(v,3),g=p[0],S=p[1],k=p[2];return a.a.createElement("div",{className:t,ref:k},a.a.createElement(_e.Stage,{width:o,height:o},a.a.createElement(_e.Layer,null,a.a.createElement(_e.Rect,{stroke:"#eee",width:o,height:o}),a.a.createElement(_e.Rect,{x:m,y:O,width:d,height:d,strokeWidth:3,stroke:"#000"}),a.a.createElement(_e.Rect,{x:j,y:O,width:d,height:d,strokeWidth:3,stroke:"#000",onMouseDown:function(e){return g([e,2])},onTouchStart:function(e){return g([e,2])}}),a.a.createElement(_e.Line,{points:[m+d*n[0],O,m+d*n[2],O+d*n[3],m+d*n[1],O+d],stroke:"#000",strokeWidth:3}),!!S&&4===S.length&&S.every(function(e){return"number"===typeof e})&&a.a.createElement(_e.Line,{points:[j+d*S[0],O,j+d*S[2],O+d*S[3],j+d*S[1],O+d],stroke:"#000",strokeWidth:3}),!!S&&"number"===typeof S[2]&&"number"===typeof S[3]&&a.a.createElement(_e.Circle,{x:j+d*S[2],y:O+d*S[3],radius:4,fill:"black"}),[0,1].map(function(e){return a.a.createElement(r.Fragment,{key:e},"number"===typeof S[e]&&a.a.createElement(_e.Circle,{x:j+d*S[e],y:0===e?O:O+d,radius:4,fill:"black"}),a.a.createElement(_e.Line,{points:[j-20,0===e?O:O+d,j+d+20,0===e?O:O+d],strokeWidth:20,stroke:"transparent",onMouseDown:function(t){t.cancelBubble=!0,g([t,e])},onTouchStart:function(t){t.cancelBubble=!0,g([t,e])}}))}),i&&a.a.createElement(_e.Line,{points:[j+d*n[0],O,j+d*n[2],O+d*n[3],j+d*n[1],O+d],stroke:"#f00",strokeWidth:3}))))},zt=function(e){switch(e.type){case fe.VerticalLine1:return a.a.createElement(pt,Object.assign({},e,{pointCount:1,direction:jt.Vertical}));case fe.VerticalLine2:return a.a.createElement(pt,Object.assign({},e,{pointCount:2,direction:jt.Vertical}));case fe.HorizontalLine1:return a.a.createElement(pt,Object.assign({},e,{pointCount:1,direction:jt.Horizontal}));case fe.HorizontalLine2:return a.a.createElement(pt,Object.assign({},e,{pointCount:2,direction:jt.Horizontal}));case fe.Square:return a.a.createElement(kt,e);case fe.SquareVerticalLine:return a.a.createElement(wt,Object.assign({},e,{direction:jt.Vertical}));case fe.SquareHorizontalLine:return a.a.createElement(wt,Object.assign({},e,{direction:jt.Horizontal}));case fe.SquareSkewedLine:return a.a.createElement(Et,e);case fe.SquarePoint:return a.a.createElement(xt,e);case fe.SquareDogleggedLine:return a.a.createElement(Ct,e)}return null};function Lt(){var e=Object(s.a)(["\n  font-size: 4rem;\n  width: 2em;\n  padding: 0.2em 0.4em;\n  display: inline-block;\n  text-align: center;\n"]);return Lt=function(){return e},e}function Ht(){var e=Object(s.a)(["\n  width: ","%;\n  height: 3px;\n  background-color: ",";\n"]);return Ht=function(){return e},e}function Nt(){var e=Object(s.a)(["\n  width: 100%;\n"]);return Nt=function(){return e},e}!function(e){e[e.Bar=0]="Bar",e[e.Text=1]="Text"}(yt||(yt={}));var Mt=g.div(Nt()),Tt=g.div(Ht(),function(e){return 100*(1-e.ratio)},function(e){return e.theme.accent}),Rt=g.div(Lt()),Wt=function(e){var t=e.className,n=e.duration,c=e.onTimeUp,i=e.id,o=e.enabled,u=e.displayStyle,l=void 0===u?yt.Bar:u,s=Object(r.useState)(0),f=Object(b.a)(s,2),d=f[0],m=f[1],O=Object(r.useState)(n?~~(n/1e3):0),j=Object(b.a)(O,2),h=j[0],v=j[1],p=Object(r.useRef)(c);return p.current=c,Object(r.useEffect)(function(){if(o&&n){m(0),v(0);var e=Date.now(),t=setInterval(function(){var r=Math.min((Date.now()-e)/n,1);m(r),v(Math.ceil((n-(Date.now()-e))/1e3)),1===r&&(clearInterval(t),p.current&&p.current())},17);return function(){return clearInterval(t)}}},[n,o,i]),l===yt.Bar?a.a.createElement(Mt,{className:t},n&&a.a.createElement(Tt,{ratio:d})):a.a.createElement(Rt,{className:t},h)};function Ut(){var e=Object(s.a)(["\n            text-align: center;\n          "]);return Ut=function(){return e},e}var Bt,Ft=function(e){var t=e.className,n=e.duration,a=e.onStart,c=Object(r.useState)(!1),i=Object(b.a)(c,2),o=i[0],u=i[1],l=Object(r.useCallback)(function(){u(!0)},[]);return Object(f.d)("div",{className:t},o?Object(f.d)("div",{css:Object(f.c)(Ut())},Object(f.d)(Wt,{duration:n,enabled:!0,onTimeUp:a,displayStyle:yt.Text})):Object(f.d)(r.Fragment,null,Object(f.d)("div",null,"\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u3092\u59cb\u3081\u308b"),Object(f.d)(A,{onClick:l},"START")))};function Vt(){var e=Object(s.a)(["\n  display: inline-block;\n"]);return Vt=function(){return e},e}var qt=(Bt={},Object(me.a)(Bt,le.Legend,{color:"red"}),Object(me.a)(Bt,le.Excellent,{color:"red"}),Object(me.a)(Bt,le.Good,{color:"red"}),Object(me.a)(Bt,le.Bad,{color:"red"}),Bt),Pt=g.svg(Vt()),Dt=function(e){var t=e.className,n=e.score,r=e.small,c=function(e){return e>=.98?le.Legend:e>=.9?le.Excellent:e>=.7?le.Good:le.Bad}(n);return a.a.createElement(Pt,{rating:c,className:t,version:"1.1",width:r?100:170,height:r?30:50,viewBox:r?"0 0 100 30":"0 0 170 50",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},a.a.createElement("defs",null,a.a.createElement("filter",{id:"inset-shadow"},a.a.createElement("feOffset",{dx:"2",dy:"3"}),a.a.createElement("feGaussianBlur",{stdDeviation:"1",result:"offset-blur"}),a.a.createElement("feComposite",{operator:"out",in:"SourceGraphic",in2:"offset-blur",result:"inverse"}),a.a.createElement("feFlood",{"flood-color":"black","flood-opacity":"0.40",result:"color"}),a.a.createElement("feComposite",{operator:"in",in:"color",in2:"inverse",result:"shadow"}),a.a.createElement("feComposite",{operator:"over",in:"shadow",in2:"SourceGraphic"}))),a.a.createElement("text",{x:"50%",y:"50%","text-anchor":"middle","dominant-baseline":"central",fontSize:r?16:24,fontWeight:"bold",fill:qt[c].color,stroke:"#000",strokeWidth:1,filter:"url(#inset-shadow)"},c.toUpperCase()))},At=function(e){var t=e.className,n=e.scores,r=e.type,c=n.length>0?n.reduce(function(e,t){return e+t},0)/n.length:0;return a.a.createElement("div",{className:t},a.a.createElement("h1",null,Ve(r)),a.a.createElement("p",null,"Total: ",Ue(c)," ",a.a.createElement(Dt,{score:c})),a.a.createElement("ul",null,n.map(function(e,t){return a.a.createElement("li",{key:t},a.a.createElement("span",null,t+1,": ",Ue(e)),a.a.createElement(Dt,{small:!0,score:e}))})," "))};function It(){var e=Object(s.a)(["\n                margin-top: auto;\n              "]);return It=function(){return e},e}function Xt(){var e=Object(s.a)(["\n                  margin: 0 auto;\n                  width: ","px;\n                "]);return Xt=function(){return e},e}function Gt(){var e=Object(s.a)(["\n                flex: auto;\n                text-align: center;\n              "]);return Gt=function(){return e},e}function Yt(){var e=Object(s.a)(["\n                text-align: center;\n                visibility: ",";\n              "]);return Yt=function(){return e},e}function Jt(){var e=Object(s.a)(["\n                position: absolute;\n                top: 0;\n                left: 0;\n              "]);return Jt=function(){return e},e}function Kt(){var e=Object(s.a)(["\n              width: 100%;\n              height: 100%;\n              display: flex;\n              flex-direction: column;\n              box-sizing: border-box;\n            "]);return Kt=function(){return e},e}function $t(){var e=Object(s.a)(["\n          width: 100%;\n          height: 100%;\n          box-sizing: border-box;\n        "]);return $t=function(){return e},e}function Qt(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        padding: 1em;\n      "]);return Qt=function(){return e},e}var Zt=function(e){var t=e.className,n=e.type,a=e.scaleCorrection,c=e.level,i=e.onResult,o=e.onFinish,u=Object(r.useRef)(),l=Object(r.useRef)([]),s=Object(r.useRef)([]),d=Object(r.useMemo)(function(){return function(e,t){var n=new Array(t).fill(0).map(function(){return Be(e)});return n.every(function(e){return"undefined"!==typeof e})?n:void 0}(n,10)},[n]),m=Object(r.useState)(!1),O=Object(b.a)(m,2),j=O[0],h=O[1],v=Object(r.useState)(0),p=Object(b.a)(v,2),g=p[0],S=p[1],k=Object(r.useState)(),y=Object(b.a)(k,2),w=y[0],E=y[1],x=Object(r.useState)(!1),C=Object(b.a)(x,2),z=C[0],L=C[1],H=Object(Ze.a)(),N=Object(b.a)(H,2),M=N[0],T=N[1],R=Object(r.useState)(!1),W=Object(b.a)(R,2),U=W[0],B=W[1];Object(r.useEffect)(function(){if(z){var e=setTimeout(function(){B(!0)},1e3);return function(){return clearTimeout(e)}}B(!1)},[z]);var F=Object(r.useCallback)(function(){if(d&&!(d.length<=g)&&w){var e=Fe(n,d[g],w);s.current=[].concat(Object(Y.a)(s.current),[e]),l.current=[].concat(Object(Y.a)(l.current),[w]),L(!0)}},[w,g,d,n]),V=Object(r.useCallback)(function(){d&&(L(!1),E(void 0),S(g+1),d.length<=g+1&&i&&!u.current&&(u.current=new Date,i({datetime:u.current,level:c,scores:s.current,type:n,params:d,state:l.current})))},[g,c,i,d,n]),q=Object(r.useMemo)(function(){return!z&&w&&function(e,t){return t.length===We[e].stateSize&&t.every(function(e){return"number"===typeof e})}(n,w)},[w,z,n]),P=Object(r.useCallback)(function(){if(d&&!(d.length<=g)){var e=Fe(n,d[g],q?w:void 0);s.current=[].concat(Object(Y.a)(s.current),[e]),L(!0)}},[w,g,q,d,n]),D=Object(r.useCallback)(function(){h(!0)},[]);if(!d)return null;var I=Math.min(T,500),X=function(e,t){return We[e].duration[t]}(n,c);return Object(f.d)("div",{css:Object(f.c)(Qt()),className:t},Object(f.d)("div",{ref:M,css:Object(f.c)($t())},j?d.length<=g?Object(f.d)(r.Fragment,null,Object(f.d)(At,{type:n,scores:s.current}),Object(f.d)(A,{onClick:function(){o&&o()}},"Finish")):Object(f.d)("div",{css:Object(f.c)(Kt())},Object(f.d)(Wt,{css:Object(f.c)(Jt()),id:g,enabled:!z,duration:X,onTimeUp:P}),Object(f.d)("div",{css:Object(f.c)(Yt(),z?"visible":"hidden")},Object(f.d)(Dt,{score:s.current.length>0?s.current[s.current.length-1]:0})),Object(f.d)("div",{css:Object(f.c)(Gt())},Object(f.d)("div",{css:Object(f.c)(Xt(),I)},Object(f.d)(zt,{type:n,params:d[g],screenSize:I,scaleCorrection:a,isAnswerShown:z,disableOperation:z,onUpdate:E}))),Object(f.d)("div",{css:Object(f.c)(It())},q&&Object(f.d)(A,{onClick:F},"OK"),U&&Object(f.d)(A,{onClick:V},d.length-1<=g?"Check Result":"Next"))):Object(f.d)(Ft,{duration:3e3,onStart:D})))},_t=function(e){var t=e.className;return a.a.createElement("div",{className:t})};function en(){var e=Object(s.a)([""]);return en=function(){return e},e}function tn(){var e=Object(s.a)(["\n                  margin-left: 1em;\n                "]);return tn=function(){return e},e}function nn(){var e=Object(s.a)(["\n                  margin-left: 1em;\n                "]);return nn=function(){return e},e}function rn(){var e=Object(s.a)(["\n                  margin-left: 1em;\n                "]);return rn=function(){return e},e}function an(){var e=Object(s.a)([""]);return an=function(){return e},e}function cn(){var e=Object(s.a)(["\n                padding: 0.5em 1em;\n                font-size: 0.9rem;\n                border-top: 1px solid #efefef;\n                display: flex;\n                align-items: center;\n\n                &:first-child {\n                  border-top: none;\n                }\n              "]);return cn=function(){return e},e}function on(){var e=Object(s.a)(["\n        background-color: #fff;\n      "]);return on=function(){return e},e}var un=function(e){var t=e.className,n=e.histories;return Object(f.d)("div",{className:t,css:Object(f.c)(on())},n&&n.map(function(e){var t=e.scores.reduce(function(e,t){return e+t},0)/e.scores.length;return Object(f.d)("div",{key:e.datetime.toISOString(),css:Object(f.c)(cn())},Object(f.d)("div",{css:Object(f.c)(an())},e.datetime.toLocaleString()),Object(f.d)("div",{css:Object(f.c)(rn())},Ve(e.type)),Object(f.d)("div",{css:Object(f.c)(nn())},e.level),Object(f.d)("div",{css:Object(f.c)(tn())},Ue(t),"\u70b9"),Object(f.d)("div",{css:Object(f.c)(en())},Object(f.d)(Dt,{small:!0,score:t})))}))},ln=function(e){var t=e.className;return a.a.createElement("div",{className:t})},sn=function(e){var t=e.className;return a.a.createElement("div",{className:t})};function bn(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: #f0f0f0;\n        padding: 1em;\n      "]);return bn=function(){return e},e}var fn=function(e){var t=e.className,n=e.histories;return Object(f.d)("div",{className:t,css:Object(f.c)(bn())},Object(f.d)(un,{histories:n}),Object(f.d)(_t,null),Object(f.d)(ln,null),Object(f.d)(sn,null))};function dn(){var e=Object(s.a)(["\n                  margin-top: -0.1em;\n                  margin-right: 0.7em;\n                  font-size: 1.2em;\n                  vertical-align: middle;\n                "]);return dn=function(){return e},e}function mn(){var e=Object(s.a)(["\n              display: block;\n              padding: 0.8em 1em 0.8em ",';\n              user-select: none;\n              cursor: pointer;\n              position: relative;\n              transition: all ease 0.1s;\n              font-size: 0.9rem;\n              border-top: 1px solid #efefef;\n\n              &:after {\n                content: ">";\n                float: right;\n                color: ',";\n                font-size: 0.9rem;\n              }\n\n              &:active:after {\n                color: #fff;\n              }\n\n              &:active {\n                background-color: ",";\n                color: #fff;\n              }\n            "]);return mn=function(){return e},e}function On(){var e=Object(s.a)(["\n        margin: 0;\n        padding: 0;\n        background-color: #fff;\n      "]);return On=function(){return e},e}var jn,hn=function(e){var t=e.className,n=e.items,r=e.onSelect,a=S(),c=n&&n.some(function(e){return!!e.icon});return Object(f.d)("ul",{className:t,css:Object(f.c)(On())},n&&n.map(function(e){return Object(f.d)("li",{css:Object(f.c)(mn(),c&&e.icon?"3em":"1em",a.accent,a.accent),key:e.id,onClick:(t=e.id,function(){r&&r(t)})},e.icon&&Object(f.d)(L.a,{color:e.iconColor,icon:e.icon,css:Object(f.c)(dn())}),e.label);var t}))};function vn(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: #f0f0f0;\n      "]);return vn=function(){return e},e}!function(e){e.ScaleCorrection="scalecorrection",e.SignOut="signout"}(jn||(jn={}));var pn=[{id:jn.ScaleCorrection,label:"\u30b9\u30af\u30ea\u30fc\u30f3\u30b5\u30a4\u30ba\u306e\u88dc\u6b63"},{id:jn.SignOut,label:"\u30ed\u30b0\u30a2\u30a6\u30c8"}],gn=function(e){var t=e.className,n=e.onSelect;return Object(f.d)("div",{className:t,css:Object(f.c)(vn())},Object(f.d)(hn,{items:pn,onSelect:function(e){n&&n(e)}}))};function Sn(){var e=Object(s.a)(["\n            width: 50%;\n            min-width: 300px;\n          "]);return Sn=function(){return e},e}function kn(){var e=Object(s.a)(["\n          text-align: center;\n          margin: 0 0 5em 0;\n        "]);return kn=function(){return e},e}function yn(){var e=Object(s.a)(["\n            width: ","px;\n            height: 3px;\n            background-color: #000;\n            margin: 0 auto;\n          "]);return yn=function(){return e},e}function wn(){var e=Object(s.a)(["\n          padding: 5em 0;\n        "]);return wn=function(){return e},e}function En(){var e=Object(s.a)(["\n          text-align: center;\n          margin: 0;\n          padding: 2em 0;\n        "]);return En=function(){return e},e}var xn=function(e){var t=e.className,n=e.scaleCorrection,a=e.onEnter,c=Object(r.useState)("number"===typeof n?n:50),i=Object(b.a)(c,2),o=i[0],u=i[1];Object(r.useEffect)(function(){"number"===typeof n&&u(100*(n-.5))},[n]);var l=o/100+.5;return Object(f.d)("div",{className:t},Object(f.d)("p",{css:Object(f.c)(En())},"\u68d2\u306e\u9577\u3055\u304c ",3,"cm \u306b\u306a\u308b\u3088\u3046\u306b\u8abf\u6574\u3057\u3066\u304f\u3060\u3055\u3044"),Object(f.d)("div",{css:Object(f.c)(wn())},Object(f.d)("div",{css:Object(f.c)(yn(),150*l)})),Object(f.d)("p",{css:Object(f.c)(kn())},Object(f.d)("input",{type:"range",min:0,max:100,value:o,onChange:function(e){return u(parseFloat(e.currentTarget.value))},css:Object(f.c)(Sn())})),Object(f.d)(A,{onClick:function(){a&&a(l)}},"OK"))};function Cn(){var e=Object(s.a)(["\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        padding: 1em;\n      "]);return Cn=function(){return e},e}var zn,Ln=function(e){var t=e.className,n=e.scaleCorrection,r=e.onScaleCorrectionEnter;return Object(f.d)("div",{className:t,css:Object(f.c)(Cn())},Object(f.d)(xn,{scaleCorrection:n,onEnter:r}))};function Hn(){var e=Object(s.a)(["\n          width: 100%;\n          height: 100%;\n        "]);return Hn=function(){return e},e}!function(e){e[e.Home=0]="Home",e[e.TrainingMenu=1]="TrainingMenu",e[e.TrainingLevel=2]="TrainingLevel",e[e.Training=3]="Training",e[e.Report=4]="Report",e[e.Setting=5]="Setting",e[e.ScaleCorrection=6]="ScaleCorrection",e[e.ScaleCorrectionFirst=7]="ScaleCorrectionFirst"}(zn||(zn={}));var Nn=function(){var e=Object(r.useMemo)(function(){var e=localStorage.getItem("katachi.scaleCorrection");return e?J(2,0,parseFloat(e)):void 0},[]),t=Object(r.useState)(e||1),n=Object(b.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(),o=Object(b.a)(i,2),s=o[0],d=o[1];Object(r.useEffect)(function(){a?localStorage.setItem("katachi.scaleCorrection",a.toString()):localStorage.removeItem("katachi.scaleCorrection")},[a]);var m=[Object(ae.a)(function(){return Object(_.a)(oe).pipe(Object(ne.a)(function(e){return e?e.uid:X.SignedOut}))},X.Loading),Object(r.useCallback)(function(){return oe.signInWithRedirect(ie)},[]),Object(r.useCallback)(function(){return oe.signOut()},[])],O=Object(b.a)(m,3),j=O[0],h=O[1],v=O[2],p=function(e){var t=Object(r.useMemo)(function(){return e?ue.ref("users/".concat(e.replace("/",""),"/histories")):void 0},[e]);return[Object(ae.a)(function(e){return e.pipe(Object(re.a)(function(e){var t=Object(b.a)(e,1)[0];return t?Object(ee.a)(t).pipe(Object(ne.a)(function(e){return Object(Y.a)(e.map(function(e){return[e.snapshot.key,e.snapshot.val()]}).map(function(e){var t=Object(b.a)(e,2)[1];return{datetime:new Date(t.datetime),level:t.level,type:t.type,params:t.params,scores:t.scores,state:t.state}}))})):Object(te.a)([])}))},[],[t]),Object(r.useCallback)(function(e){return t?t.push({datetime:e.datetime.getTime(),level:e.level,type:e.type,params:e.params,scores:e.scores,state:e.state}).then(function(){}):Promise.reject()},[t])]}("string"===typeof j?j:void 0),g=Object(b.a)(p,2),S=g[0],w=g[1],E=Object(r.useState)(zn.Home),x=Object(b.a)(E,2),z=x[0],L=x[1];return Object(r.useEffect)(function(){"string"===typeof j&&z===zn.Home&&L(e?zn.TrainingMenu:zn.ScaleCorrectionFirst)},[z,e,j]),Object(f.d)(k,null,Object(f.d)(y,null),Object(f.d)(q,{css:Object(f.c)(Hn()),currentMode:z===zn.Training||z===zn.TrainingMenu||z===zn.TrainingLevel?C.Training:z===zn.Report?C.Report:z===zn.Setting||z===zn.ScaleCorrection?C.Setting:void 0,navHidden:z===zn.Home||z===zn.Training||z===zn.ScaleCorrectionFirst,onModeChange:function(e){e===C.Training&&L(zn.TrainingMenu),e===C.Report&&L(zn.Report),e===C.Setting&&L(zn.Setting)},headerClosable:z===zn.Training,onHeaderClose:function(){L(zn.TrainingMenu),d(void 0)},headerBackButtonVisible:z===zn.TrainingLevel||z===zn.ScaleCorrection,onHeaderBackButtonClick:function(){z===zn.TrainingLevel&&L(zn.TrainingMenu),z===zn.ScaleCorrection&&L(zn.Setting)}},z===zn.Home&&j===X.SignedOut&&Object(f.d)(G,{onSignIn:function(){h()}}),z===zn.TrainingMenu&&Object(f.d)(Ie,{onSelect:function(e){d([e,void 0]),L(zn.TrainingLevel)}}),z===zn.TrainingLevel&&Object(f.d)(Qe,{onSelect:function(e){d(function(t){return t?[t[0],e]:void 0}),L(zn.Training)}}),z===zn.Training&&s&&s[1]&&Object(f.d)(Zt,{type:s[0],level:s[1],scaleCorrection:a,onResult:function(e){w(e)},onFinish:function(){L(zn.TrainingMenu)}}),z===zn.Report&&Object(f.d)(fn,{histories:S}),z===zn.Setting&&Object(f.d)(gn,{onSelect:function(){var e=Object(l.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===jn.ScaleCorrection&&L(zn.ScaleCorrection),t!==jn.SignOut){e.next=5;break}return e.next=4,v();case 4:L(zn.Home);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}),(z===zn.ScaleCorrection||z===zn.ScaleCorrectionFirst)&&Object(f.d)(Ln,{scaleCorrection:a,onScaleCorrectionEnter:function(e){c(e),z===zn.ScaleCorrectionFirst?L(zn.TrainingMenu):L(zn.Setting)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(Nn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},96:function(e,t,n){e.exports=n(156)}},[[96,1,2]]]);
//# sourceMappingURL=main.d4b3ce9b.chunk.js.map